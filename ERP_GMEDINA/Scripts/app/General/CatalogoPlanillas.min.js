var pathname=window.location.pathname+"/",URLactual=window.location.toString(),getUrl=window.location,baseUrl=getUrl.protocol+"//"+getUrl.host+"/"+getUrl.pathname.split("/")[1],urlProtocoloDominio=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),table,table2,checkSeleccionarTodasLasDeducciones=$("#checkSeleccionarTodasDeducciones"),urlSinElIndex="";const btnGuardar=$("#btnGuardarCatalogoDePlanillasIngresosDeducciones"),btnEditar=$("#btnEditarCatalogoDePlanillasIngresosDeducciones"),validacionDescripcionPlanilla=$("#validacionDescripcionPlanilla"),asteriscoDescripcionPlanilla=$("#asteriscoDescripcion"),asteriscoFrecuenciaPago=$("#asteriscoFrecuenciaPago"),validacionFrecuenciaDias=$("#validacionFrecuenciaDias"),validacionCatalogoIngresos=$("#catalogoDeIngresos #validacionCatalogoIngresos"),htmlBody=$("html, body"),validacionCatalogoDeducciones=$("#catalogoDeDeducciones #validacionCatalogoDeducciones"),inputDescripcionPlanilla=$("#cpla_DescripcionPlanilla"),inputFrecuenciaEnDias=$("#cpla_FrecuenciaEnDias"),inputIdPlanilla=$("form #cpla_IdPlanilla"),cargandoCrear=$("#cargandoCrear"),cargandoEditar=$("#cargandoEditar"),cargandoEliminar=$("#cargandoEliminar"),elementsSwitch=Array.prototype.slice.call(document.querySelectorAll(".js-switch")),checkRecibeComision=$("#check-recibe-comision")[0];function _ajax(params,uri,type,callback,enviar){$.ajax({url:uri,type:type,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(params),beforeSend:function(){enviar()},success:function(data){callback(data)}})}function getDDL(){_ajax(null,urlSinElIndex+"/getPeriodos","GET",data=>{data=data.data;let valEditar=$("#valFrecuenciaEnDias").val(),valorEstaEnEditar=!(estaEnCrear()>0);valorEstaEnEditar&&$("#cpla_FrecuenciaEnDias").append("<option value=0>Selecione una opción...</option>"),$.each(data,(function(i,iter){valorEstaEnEditar?$("#cpla_FrecuenciaEnDias").append("<option value='"+iter.id+"' "+(iter.id==valEditar?"selected":"")+">"+iter.descripcion+"</option>"):$("#cpla_FrecuenciaEnDias").append("<option value='"+iter.id+"'>"+iter.descripcion+"</option>")}))},()=>{})}var crearEditar=function(edit){var arrayIngresos=[],arrayDeducciones=[],descripcionPlanilla=inputDescripcionPlanilla.val(),frecuenciaDias=inputFrecuenciaEnDias.val();if(listaCatalogoIngresos(arrayIngresos),listaCatalogoDeducciones(arrayDeducciones),edit){let idPlanilla=inputIdPlanilla.val();mostrarSpinner($("#btnConfirmacionEdit"),cargandoEditar),_ajax({id:idPlanilla,catalogoDePlanillas:[descripcionPlanilla,frecuenciaDias],catalogoIngresos:arrayIngresos,catalogoDeducciones:arrayDeducciones,checkRecibeComision:checkRecibeComision.checked},"/CatalogoDePlanillas/Edit","POST",data=>{"bien"==data?(iziToast.success({title:"Exito",message:"¡El registro se editó de forma exitosa!"}),location.href=baseUrl+"/Index"):(iziToast.error({title:"Error",message:"No se editó el registro, contacte al administrador"}),ocultarSpinnerSpinner($("#btnConfirmacionEdit"),cargandoEditar))},enviar=>{})}else mostrarSpinner($("#btnGuardarCatalogoDePlanillasIngresosDeducciones"),cargandoCrear),_ajax({catalogoDePlanillas:[descripcionPlanilla,frecuenciaDias],catalogoIngresos:arrayIngresos,catalogoDeducciones:arrayDeducciones,checkRecibeComision:checkRecibeComision.checked},"/CatalogoDePlanillas/Create","POST",data=>{"bien"==data?(iziToast.success({title:"Exito",message:"¡El registro se agregó de forma exitosa!"}),location.href=baseUrl+"/Index"):(iziToast.error({title:"Error",message:"No se guardó el registro, contacte al administrador"}),ocultarSpinner($("#btnGuardarCatalogoDePlanillasIngresosDeducciones"),cargandoCrear))},enviar=>{})};function listaCatalogoDeducciones(arrayDeducciones){$('#catalogoDeDeducciones #tblCatalogoDeducciones tbody tr td input[type="checkbox"].i-checks').each((function(index,val){let checkIdDedu,arrDedu,currentCheckboxIdDedu=$(val).attr("id").split("-")[1],isCheckedDedu;!0===$("#catalogoDeDeducciones #tblCatalogoDeducciones tbody tr td #check-"+currentCheckboxIdDedu).is(":checked",!0)&&arrayDeducciones.push(currentCheckboxIdDedu)}))}function listaCatalogoIngresos(arrayIngresos){$('#catalogoDeIngresos input[type="checkbox"].i-checks').each((function(index,val){let checkId,arr,currentCheckboxIdIngreso=$(val).attr("id").split("-")[1],isChecked;$("#catalogoDeIngresos #check-"+currentCheckboxIdIngreso).is(":checked",!0)&&arrayIngresos.push(currentCheckboxIdIngreso)}))}function listaCatalogoDeduccionesFalse(){var hayUnoFalso=!0;return $('#catalogoDeDeducciones table tbody tr td input[type="checkbox"].i-checks').each((function(index,val){let checkIdDedu,arrDedu,currentCheckboxIdDedu=$(val).attr("id").split("-")[1],isCheckedDedu;$("#catalogoDeDeducciones tbody tr td input#check-"+currentCheckboxIdDedu).prop("checked")||(hayUnoFalso=!1)})),hayUnoFalso}function listaCatalogoIngresosFalse(){var hayUnoFalso=!0;return $('#catalogoDeIngresos table tbody tr td input[type="checkbox"].i-checks').each((function(index,val){let checkId,arr,currentCheckboxIdIngreso=$(val).attr("id").split("-")[1],isChecked;$("#catalogoDeIngresos tbody tr td input#check-"+currentCheckboxIdIngreso).prop("checked")||(hayUnoFalso=!1)})),hayUnoFalso}function spinner(){return'<div class="sk-spinner sk-spinner-wave">\n                <div class="sk-rect1"></div>\n                <div class="sk-rect2"></div>\n                <div class="sk-rect3"></div>\n                <div class="sk-rect4"></div>\n                <div class="sk-rect5"></div>\n             </div>'}function estaEnCrear(){return getUrl.toString().indexOf("Create")}function estaEnEditar(){return getUrl.toString().indexOf("Edit")}function estaEnDetalles(){return getUrl.toString().indexOf("Details")}function estaEnIndex(){return getUrl.toString().indexOf("Index")}function scrollArriba(){htmlBody.animate({scrollTop:60},300)}function mostrarSpinner(btn,div){btn.hide(),div.html(spinner()),div.show()}function ocultarSpinner(btn,div){btn.show(),div.html(""),div.hide()}function verificarCampos(descripcionPlanilla,frecuenciaDias,catalogoIngresos,catalogoDeducciones){var todoBien=!0;return""==descripcionPlanilla.trim()?(scrollArriba(),validacionDescripcionPlanilla.show(),inputDescripcionPlanilla.focus(),asteriscoDescripcionPlanilla.addClass("text-danger"),todoBien=!1):(asteriscoDescripcionPlanilla.removeClass("text-danger"),validacionDescripcionPlanilla.hide()),null==frecuenciaDias||0==parseInt(frecuenciaDias)?(scrollArriba(),validacionFrecuenciaDias.show(),todoBien&&inputFrecuenciaEnDias.focus(),asteriscoFrecuenciaPago.addClass("text-danger"),todoBien=!1):(asteriscoFrecuenciaPago.removeClass("text-danger"),validacionFrecuenciaDias.hide()),0==catalogoIngresos.length?(scrollArriba(),validacionCatalogoIngresos.show(),validacionCatalogoIngresos.parent().show(),todoBien=!1):validacionCatalogoIngresos.parent().hide(),0!=catalogoDeducciones.length||$("#noAplica").is(":checked",!0)?validacionCatalogoDeducciones.parent().hide():(scrollArriba(),validacionCatalogoDeducciones.parent().show(),todoBien=!1),todoBien}const Activar='           <button type="button" class="btn btn-primary btn-xs" id="btnDetalleCatalogoDeducciones">Detalles</button>\n\t\t\t\t\t\t\t<button type="button" class ="btn btn-default btn-xs" id="btnActivar">Activar</button>\n\t\t\t\t\t\t\t',DetallesEditar='\n\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-xs" id="btnDetalleCatalogoDeducciones">Detalles</button>\n\t\t\t\t\t\t\t<button type="button" class="btn btn-default btn-xs" id="btnEditarCatalogoDeducciones">Editar</button>\n\t\t\t\t\t\t\t';function listar(){obtenerIdDetallesEditar("#tblCatalogoPlanillas tbody",table=$(".dataTables-example").DataTable({destroy:!0,ajax:{method:"GET",url:urlSinElIndex+"/getPlanilla",contentType:"application/json; charset=utf-8",dataType:"json"},columns:[{orderable:!1,bSort:!1,className:"details-control",data:null,defaultContent:""},{data:"idPlanilla"},{data:"descripcionPlanilla"},{data:"descripcionPeriodo"},{data:"recibeComision"},{data:"activoAdmin",render:function(data){return data.activo?"Activo":"Inactivo"}},{orderable:!1,data:"activoAdmin",render:function(data){return 0==data.activo&&1==data.esAdmin?Activar:data.activo&&data.esAdmin?DetallesEditar:data.activo||data.esAdmin?DetallesEditar:""}}],language:{sProcessing:spinner(),sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"No se cargó la información, contacte al administrador",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:spinner(),oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},responsive:!1,pageLength:10,dom:'<"html5buttons"B>lTfgtpi',buttons:[{extend:"copy",text:'<i class="fa fa-copy btn-xs"></i>',titleAttr:"Copiar",exportOptions:{columns:[1,2,3,4]},className:"btn btn-primary"}]}))}const idiomaEspaniolCatalogos={paging:!1,sProcessing:spinner(),sLengthMenu:"_MENU_",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:spinner(),oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}};function listarCatalogos(){$(".i-checks, .i-checks-no-aplica").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}),elementsSwitch.forEach((function(html){var switchery=new Switchery(html,{color:"#18a689",jackColor:"#fff",size:"small",disabled:!0})}));var urlFetchData=baseUrl+"/GetIngresosDeducciones?esCrear=";function seleccionarCheckbox_CatalogoIngresos(){var catalogoIngresosChangeCheckbox=document.querySelector("#catalogoDeIngresos .js-check-change");const catalogoIngresosInputs=$("#tblCatalogoIngresos tbody tr td input.i-checks");catalogoIngresosChangeCheckbox.onchange=function(){const seleccionarTodosLosIngresos=$("#seleccionarTodosLosIngresos");let seleccionarDeseleccionar=seleccionarTodosLosIngresos.html();catalogoIngresosChangeCheckbox.checked?(catalogoIngresosInputs.iCheck("check"),seleccionarTodosLosIngresos.html(seleccionarDeseleccionar.replace("Seleccionar","Deseleccionar"))):(catalogoIngresosInputs.iCheck("uncheck"),seleccionarTodosLosIngresos.html(seleccionarDeseleccionar.replace("Deseleccionar","Seleccionar")))},$(catalogoIngresosInputs).on("ifChecked",()=>{listaCatalogoIngresosFalse()&&($("#checkSeleccionarTodosIngresos").is(":checked")||$("#checkSeleccionarTodosIngresos").prop("checked",!0))}),listaCatalogoIngresosFalse()&&$("#checkSeleccionarTodosIngresos").click()}estaEnEditar()>1?(urlFetchData+="false&id="+URLactual.substr(URLactual.search(/Edit/i)+"Edit".length+1),table=$(".tbl-catalogos").DataTable({language:{paging:!1,sProcessing:spinner(),sLengthMenu:"_MENU_",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:spinner(),oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},paging:!1,ajax:{method:"GET",url:urlFetchData,contentType:"application/json; charset=utf-8",dataType:"json"},responsive:!1,dom:"lft",columns:[{searchable:!1,orderable:!0,data:"checkId",render:function(data){let check=data.check?"checked":"";return'<input type="checkbox" class="i-checks" id="check-'+data.id+'" '+check+" />"},className:"",defaultContent:""},{data:"descripcion"}],order:[[1,"asc"]],initComplete:function(settings,json){$("#tblCatalogoIngresos tbody tr td .i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}),$("#tblCatalogoIngresos tbody tr td .i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"});var catalogoIngresosChangeCheckbox=document.querySelector("#catalogoDeIngresos .js-check-change");const catalogoIngresosInputs=$("#tblCatalogoIngresos tbody tr td input.i-checks");catalogoIngresosChangeCheckbox.onchange=function(){const seleccionarTodosLosIngresos=$("#seleccionarTodosLosIngresos");let seleccionarDeseleccionar=seleccionarTodosLosIngresos.html();catalogoIngresosChangeCheckbox.checked?(catalogoIngresosInputs.iCheck("check"),seleccionarTodosLosIngresos.html(seleccionarDeseleccionar.replace("Seleccionar","Deseleccionar"))):(catalogoIngresosInputs.iCheck("uncheck"),seleccionarTodosLosIngresos.html(seleccionarDeseleccionar.replace("Deseleccionar","Seleccionar")))},$(catalogoIngresosInputs).on("ifChecked",()=>{validacionCatalogoIngresos.hide(),listaCatalogoIngresosFalse()&&($("#checkSeleccionarTodosIngresos").is(":checked")||$("#checkSeleccionarTodosIngresos").click())}),listaCatalogoIngresosFalse()&&$("#checkSeleccionarTodosIngresos").click()}}),table2=$(".tbl-catalogos-d").DataTable({language:idiomaEspaniolCatalogos,paging:!1,ajax:{method:"GET",url:urlFetchData+="&esIngreso=false",contentType:"application/json; charset=utf-8",dataType:"json"},responsive:!1,dom:"lft",columns:[{searchable:!1,orderable:!0,data:"checkId",render:function(data){let check=data.check?"checked":"";return'<input type="checkbox" class="i-checks" id="check-'+data.id+'" '+check+" />"},className:"",defaultContent:""},{data:"descripcion"}],order:[[1,"asc"]],initComplete:function(settings,json){$("#tblCatalogoDeducciones tbody tr td .i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"});const catalogoDeduccionesInputs=$("#catalogoDeDeducciones #tblCatalogoDeducciones tbody tr td input.i-checks");var catalogoDeduccionesChangeCheckbox=document.querySelector("#catalogoDeDeducciones .js-check-change");$("#noAplica").on("ifChecked",()=>{catalogoDeduccionesInputs.iCheck("uncheck");const seleccionarTodasLasDeducciones=checkSeleccionarTodasLasDeducciones;seleccionarTodasLasDeducciones.is(":checked")&&seleccionarTodasLasDeducciones.click()}),$(catalogoDeduccionesInputs).on("ifChecked",()=>{$("#noAplica").iCheck("uncheck"),listaCatalogoDeduccionesFalse()&&(checkSeleccionarTodasLasDeducciones.is(":checked")||checkSeleccionarTodasLasDeducciones.click())}),catalogoDeduccionesChangeCheckbox.onchange=function(){const seleccionarTodasLasDeducciones=$("#seleccionarTodasLasDeducciones");let seleccionarDeseleccionar=seleccionarTodasLasDeducciones.html();catalogoDeduccionesChangeCheckbox.checked?(catalogoDeduccionesInputs.iCheck("check"),seleccionarTodasLasDeducciones.html(seleccionarDeseleccionar.replace("Seleccionar","Deseleccionar"))):(seleccionarTodasLasDeducciones.html(seleccionarDeseleccionar.replace("Deseleccionar","Seleccionar")),catalogoDeduccionesInputs.iCheck("uncheck"))},listaCatalogoDeduccionesFalse()&&checkSeleccionarTodasLasDeducciones.click()}})):(table=$(".tbl-catalogos").DataTable({language:idiomaEspaniolCatalogos,paging:!1,ajax:{method:"GET",url:urlFetchData,contentType:"application/json; charset=utf-8",dataType:"json"},responsive:!1,dom:"lft",columns:[{searchable:!1,orderable:!0,data:"id",render:function(data){return'<input type="checkbox" class="i-checks" id="check-'+data+'" />'},className:"",defaultContent:""},{data:"descripcion"}],order:[[1,"asc"]],initComplete:function(settings,json){$("#tblCatalogoIngresos tbody tr td .i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}),$("#tblCatalogoIngresos tbody tr td .i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"});var catalogoIngresosChangeCheckbox=document.querySelector("#catalogoDeIngresos .js-check-change");const catalogoIngresosInputs=$("#tblCatalogoIngresos tbody tr td input.i-checks");catalogoIngresosChangeCheckbox.onchange=function(){const seleccionarTodosLosIngresos=$("#seleccionarTodosLosIngresos");let seleccionarDeseleccionar=seleccionarTodosLosIngresos.html();catalogoIngresosChangeCheckbox.checked?(catalogoIngresosInputs.iCheck("check"),seleccionarTodosLosIngresos.html(seleccionarDeseleccionar.replace("Seleccionar","Deseleccionar"))):(catalogoIngresosInputs.iCheck("uncheck"),seleccionarTodosLosIngresos.html(seleccionarDeseleccionar.replace("Deseleccionar","Seleccionar")))},$(catalogoIngresosInputs).on("ifChecked",()=>{validacionCatalogoIngresos.hide(),listaCatalogoIngresosFalse()&&($("#checkSeleccionarTodosIngresos").is(":checked")||$("#checkSeleccionarTodosIngresos").click())}),listaCatalogoIngresosFalse()&&$("#checkSeleccionarTodosIngresos").click()}}),table2=$(".tbl-catalogos-d").DataTable({language:idiomaEspaniolCatalogos,paging:!1,ajax:{method:"GET",url:urlFetchData+="true&esIngreso=false",contentType:"application/json; charset=utf-8",dataType:"json"},responsive:!1,dom:"lft",columns:[{searchable:!1,orderable:!0,data:"id",render:function(data){return'<input type="checkbox" class="i-checks" id="check-'+data+'" />'},className:"",defaultContent:""},{data:"descripcion"}],order:[[1,"asc"]],initComplete:function(settings,json){$("#tblCatalogoDeducciones tbody tr td .i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"});const catalogoDeduccionesInputs=$("#catalogoDeDeducciones #tblCatalogoDeducciones tbody tr td input.i-checks");var catalogoDeduccionesChangeCheckbox=document.querySelector("#catalogoDeDeducciones .js-check-change");$("#noAplica").on("ifChecked",()=>{catalogoDeduccionesInputs.iCheck("uncheck");const seleccionarTodasLasDeducciones=checkSeleccionarTodasLasDeducciones;seleccionarTodasLasDeducciones.is(":checked")&&seleccionarTodasLasDeducciones.click()}),$(catalogoDeduccionesInputs).on("ifChecked",()=>{validacionCatalogoDeducciones.hide(),$("#noAplica").iCheck("uncheck"),listaCatalogoDeduccionesFalse()&&(checkSeleccionarTodasLasDeducciones.is(":checked")||checkSeleccionarTodasLasDeducciones.click())}),catalogoDeduccionesChangeCheckbox.onchange=function(){const seleccionarTodasLasDeducciones=$("#seleccionarTodasLasDeducciones");let seleccionarDeseleccionar=seleccionarTodasLasDeducciones.html();catalogoDeduccionesChangeCheckbox.checked?(catalogoDeduccionesInputs.iCheck("check"),seleccionarTodasLasDeducciones.html(seleccionarDeseleccionar.replace("Seleccionar","Deseleccionar"))):(seleccionarTodasLasDeducciones.html(seleccionarDeseleccionar.replace("Deseleccionar","Seleccionar")),catalogoDeduccionesInputs.iCheck("uncheck"))},listaCatalogoDeduccionesFalse()&&checkSeleccionarTodasLasDeducciones.click()}}))}function obtenerIdDetallesEditar(tbody,table){"//"==pathname&&(pathname=baseUrl),$(document).on("click","button#btnEditarCatalogoDeducciones",(function(){var data=table.row($(this).parents("tr")).data();location.href=urlSinElIndex+"/Edit/"+data.idPlanilla})),$(tbody).on("click","button#btnDetalleCatalogoDeducciones",(function(){var data=table.row($(this).parents("tr")).data();location.href=urlSinElIndex+"/Details/"+data.idPlanilla})),$(tbody).on("click","button#btnActivar",(function(){localStorage.setItem("id",table.row($(this).parents("tr")).data().idPlanilla),localStorage.setItem("element",JSON.stringify($(this).parents("tr"))),$("#frmActivarCatalogoPlanilla").modal({backdrop:"static",keyboard:!1})}))}function getIngresos(data){var ingresosPlanillas='\n    <div class="col-lg-6">\n       <div class="ibox-title">\n            <h5>Ingresos de la Planilla</h5>\n        </div>\n\t\t<div class="ibox-content">\n\t\t<div class="data-details" style="padding:5px">\n            <table class="table table-bordered tbl-catalogos" id="child-'+localStorage.getItem("idDatatableChild")+'">\n                <thead>\n                    <tr>\n                        <th>Ingreso</th>\n                    </tr>\n                </thead>\n                <tbody>';return $.each(data.ingresos,(function(index,val){ingresosPlanillas+="\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t"+val.cin_DescripcionIngreso+"\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t"})),ingresosPlanillas+="</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n        </div>\n    </div>"}function getDeducciones(data){var deduccionesPlanilla='\n    <div class="col-lg-6">\n       <div class="ibox-title">\n            <h5>Deducciones de la Planilla</h5>\n        </div>\n\t\t<div class="ibox-content">\n\t\t<div class="data-details" style="padding:5px">\n            <table class="table table-bordered tbl-catalogos" id="child-'+localStorage.getItem("idDatatableChild")+'">\n                <thead>\n                    <tr>\n                        <th>Deducción</th>\n                    </tr>\n                </thead>\n                <tbody>';return $.each(data.deducciones,(function(index,val){deduccionesPlanilla+="\n                        <tr>\n                            <td>\n                                "+val.cde_DescripcionDeduccion+"\n                            </td>\n                        </tr>\n                    "})),deduccionesPlanilla+="</tbody>\n\t\t\t</table>\n\t\t\t</div>\n        </div>\n    </div>"}function obtenerDetalles(id,handleData){_ajax(null,"/CatalogoDePlanillas/getDeduccionIngresos/"+id,"GET",data=>handleData(data),()=>{})}$(document).ready(()=>{let ubicacionIndexUrl=URLactual.indexOf("/Index"),ubicacionCreateUrl=URLactual.indexOf("/Create"),ubicacionEditUrl=URLactual.indexOf("/Edit");ubicacionIndexUrl>0&&(urlSinElIndex=URLactual.replace("/Index","")),ubicacionIndexUrl<0&&ubicacionCreateUrl<0&&ubicacionEditUrl<0&&(urlSinElIndex=URLactual),ubicacionCreateUrl>0&&(urlSinElIndex=URLactual.replace("/Create","")),ubicacionEditUrl>0&&(urlSinElIndex=URLactual.replace(URLactual.substring(ubicacionEditUrl,URLactual.length),"")),getDDL(),estaEnCrear()<1&&estaEnEditar()<1?listar():listarCatalogos(),estaEnDetalles()>1&&$(".tbl-catalogos").DataTable({language:{paging:!1,sProcessing:spinner(),sLengthMenu:"_MENU_",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp;&nbsp;&nbsp; Buscar:</div> ",sUrl:"",sInfoThousands:",",sLoadingRecords:spinner(),oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},paging:!1,responsive:!1,dom:"lft",order:[[1,"asc"]]}),estaEnCrear()>1&&($('input[type="checkbox"]').prop("checked",!1),inputDescripcionPlanilla.val(""),inputFrecuenciaEnDias.val("")),inputDescripcionPlanilla.blur((function(){""!=$(this).val().trim()?(validacionDescripcionPlanilla.hide(),asteriscoDescripcionPlanilla.removeClass("text-danger")):(asteriscoDescripcionPlanilla.addClass("text-danger"),validacionDescripcionPlanilla.show())})),inputFrecuenciaEnDias.blur((function(){"0"!=inputFrecuenciaEnDias.val()||inputFrecuenciaEnDias.val()>0||""!=inputFrecuenciaEnDias.val()?(validacionFrecuenciaDias.hide(),asteriscoFrecuenciaPago.removeClass("text-danger")):(validacionFrecuenciaDias.show(),asteriscoFrecuenciaPago.addClass("text-danger"))}))}),$(document).on("click","td.details-control",(function(){var tr=$(this).closest("tr"),row=table.row(tr),detail;row.child.isShown()?(row.child.hide(),tr.removeClass("shown")):(row.child([spinner()]).show(),tr.addClass("shown"),localStorage.setItem("idDatatableChild",row.data().idPlanilla),obtenerDetalles(row.data().idPlanilla,data=>{row.child([getIngresos(data)+getDeducciones(data)]).show(),tr.addClass("shown"),detail=null,detail=new $("table tbody tr td #child-"+localStorage.getItem("idDatatableChild")).DataTable({destroy:!0,language:{paging:!1,sProcessing:spinner(),sLengthMenu:"_MENU_",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp;&nbsp;&nbsp; Buscar: ",sUrl:"",sInfoThousands:",",sLoadingRecords:spinner(),oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},paging:!0,responsive:!1,dom:"lftpi",order:[[0,"asc"]],initComplete:function(){}})},()=>{}))})),$(document).on("click","#btnGuardarCatalogoDePlanillasIngresosDeducciones",(function(){table.search("").draw(),table2.search("").draw();let arrayIngresos=[],arrayDeducciones=[],descripcionPlanilla=inputDescripcionPlanilla.val(),frecuenciaDias=inputFrecuenciaEnDias.val();listaCatalogoIngresos(arrayIngresos),listaCatalogoDeducciones(arrayDeducciones),verificarCampos(descripcionPlanilla,frecuenciaDias,arrayIngresos,arrayDeducciones)&&crearEditar(!1)})),$("#btnEditarCatalogoDePlanillasIngresosDeducciones").click((function(){table.search("").draw(),table2.search("").draw();let arrayIngresos=[],arrayDeducciones=[],descripcionPlanilla=inputDescripcionPlanilla.val(),frecuenciaDias=inputFrecuenciaEnDias.val();listaCatalogoIngresos(arrayIngresos),listaCatalogoDeducciones(arrayDeducciones),verificarCampos(descripcionPlanilla,frecuenciaDias,arrayIngresos,arrayDeducciones)&&$("#modalConfirmacionEdit").modal({backdrop:"static",keyboard:!1})})),$(document).on("click","#btnConfirmacionEdit",(function(){crearEditar(!0)})),$("#inactivar").click(()=>{$("#InactivarCatalogoDeducciones").modal({backdrop:"static",keyboard:!1})}),$("#InactivarCatalogoDeducciones #btnInactivarPlanilla").click(()=>{$.ajax({url:"/CatalogoDePlanillas/verificarAutorizacion/",method:"POST",data:{sPantalla:"CatalogoDePlanillas/DeleteConfirmed"}}).done((function(data){if(0==data)$("#InactivarCatalogoDeducciones").modal("hide"),iziToast.error({title:"Error",message:"No tienes permisos para realizar esta acción"});else{var id=inputIdPlanilla.val();mostrarSpinner($("#btnInactivarPlanilla"),cargandoEliminar),_ajax({id:id},"/CatalogoDePlanillas/Delete","POST",data=>{"bien"==data?(iziToast.success({title:"Exito",message:"¡El registro se inactivó de forma exitosa!"}),$("#InactivarCatalogoDeducciones").modal("hide"),location.href=baseUrl+"/Index"):iziToast.error({title:"Error",message:"No se inactivó el registro, contacte al administrador"}),ocultarSpinner($("#btnInactivarPlanilla"),cargandoEliminar)},enviar=>{})}}))}),$(document).on("click","#btnActivarCatatalogoPlanilla",()=>{$.ajax({url:"/CatalogoDePlanillas/verificarAutorizacion/",method:"POST",data:{sPantalla:"CatalogoDePlanillas/Activar"}}).done((function(data){if(0==data)$("#frmActivarCatalogoPlanilla").modal("hide"),iziToast.error({title:"Error",message:"No tienes permisos para realizar esta acción"});else{let id=localStorage.getItem("id");mostrarSpinner($("#btnActivarCatatalogoPlanilla"),$("#cargandoActivar")),_ajax({id:id},"/CatalogoDePlanillas/ActivarPlanilla","POST",data=>{"bien"==data.response?(iziToast.success({title:"Éxito",message:"¡El registro se activó de forma exitosa!"}),$("#frmActivarCatalogoPlanilla").modal("hide"),table.clear(),table.rows.add(data.data).draw()):iziToast.error({title:"Éxito",message:"No se activó el registro, contacte al administrador"}),ocultarSpinner($("#btnActivarCatatalogoPlanilla"),$("#cargandoActivar"))},()=>{})}}))});